import matplotlib.pyplot as plt
import numpy as np

# 假设你有如下数据
epochs = np.arange(0, 30)  # Epochs from 0 to 30
# audio_gradient_magnitude = [0.58, 0.59, 0.60, 0.61, 0.62, 0.63, 0.64, 0.65, 0.66, 0.67, 0.68, 0.69, 0.70, 0.71, 0.72, 0.73, 0.74, 0.75, 0.76, 0.77, 0.78, 0.79, 0.80, 0.81, 0.82, 0.83, 0.84, 0.85, 0.86, 0.87, 0.88]  # Example data for audio gradient magnitude
# video_gradient_magnitude = [0.59, 0.60, 0.61, 0.62, 0.63, 0.64, 0.65, 0.66, 0.67, 0.68, 0.69, 0.70, 0.71, 0.72, 0.73, 0.74, 0.75, 0.76, 0.77, 0.78, 0.79, 0.80, 0.81, 0.82, 0.83, 0.84, 0.85, 0.86, 0.87, 0.88, 0.89]  # Example data for video gradient magnitude
# text_gradient_magnitude = [0.60, 0.61, 0.62, 0.63, 0.64, 0.65, 0.66, 0.67, 0.68, 0.69, 0.70, 0.71, 0.72, 0.73, 0.74, 0.75, 0.76, 0.77, 0.78, 0.79, 0.80, 0.81, 0.82, 0.83, 0.84, 0.85, 0.86, 0.87, 0.88, 0.89, 0.90]  # Example data for text gradient magnitude
# 使用 gradient_log_iemo_a.txt（jiang版本）中的数据作为 audio 的输入
video_gradient_magnitude = [
    0.6217361092567444, 0.6053791828453541, 0.6831921897828579, 0.6388809084892273, 0.5729860849678516,
    0.5351094529032707, 0.529474813491106, 0.5434503369033337, 0.5427511818706989, 0.5337422974407673,
    0.5203517526388168, 0.49616966396570206, 0.5242384858429432, 0.6047004982829094, 0.5684404484927654,
    0.5423237718641758, 0.5145636610686779, 0.5381778702139854, 0.5097185783088207, 0.4976791702210903,
    0.5053140297532082, 0.49085260182619095, 0.4853399842977524, 0.5463867783546448, 0.5706848539412022,
    0.5391765385866165, 0.5288579873740673, 0.5210472531616688, 0.4976174384355545, 0.4680716060101986
]

audio_gradient_magnitude = [
    0.35374702513217926, 0.3625720515847206, 0.3438173718750477, 0.38174714520573616, 0.36126402392983437,
    0.37170328199863434, 0.35170529782772064, 0.3567698709666729, 0.3558478318154812, 0.35526715591549873,
    0.3682900033891201, 0.35712357237935066, 0.3777651786804199, 0.3995239660143852, 0.35825787857174873,
    0.35045044869184494, 0.3457888066768646, 0.34968581050634384, 0.3653278108686209, 0.34741705283522606,
    0.3345702216029167, 0.3592081107199192, 0.33646724559366703, 0.3765847161412239, 0.383005503565073,
    0.39039596915245056, 0.36470852419734, 0.3487613685429096, 0.34988196939229965, 0.31938695535063744,
]
# 使用 gradient_log_iemo_t.txt 中的数据作为 text_gradient_magnitude
text_gradient_magnitude = [
    0.733079805970192, 0.7662634551525116, 0.7805874049663544, 0.7565215304493904, 0.7011927515268326,
    0.6484401673078537, 0.6882672309875488, 0.6569485664367676, 0.663870632648468, 0.7015015184879303,
    0.6877081841230392, 0.7080266699194908, 0.6750259958207607, 0.6295194141566753, 0.6628914326429367,
    0.6190549582242966, 0.60692523047328, 0.6164879575371742, 0.5828408002853394, 0.6217361092567444,
    0.6053791828453541, 0.6831921897828579, 0.6388809084892273, 0.5729860849678516, 0.5351094529032707,
    0.529474813491106, 0.5434503369033337, 0.5427511818706989, 0.5337422974407673, 0.5203517526388168
]
# print("sjs")
print(len(text_gradient_magnitude),len(audio_gradient_magnitude),len(video_gradient_magnitude))
# 创建画布和子图
fig, ax = plt.subplots()

# 绘制数据
ax.plot(epochs, audio_gradient_magnitude, 'r-o', label='audio', markersize=4)
ax.plot(epochs, video_gradient_magnitude, 'g-*', label='video', markersize=4)
ax.plot(epochs, text_gradient_magnitude, 'b-+', label='text', markersize=4)

# 添加标签和标题
ax.set_xlabel('Epoch', fontsize=18)
ax.set_ylabel('Gradient Magnitude', fontsize=18)
ax.set_title('Gradient Magnitude of Each Modality', fontsize=18)
ax.tick_params(axis='both', labelsize=14)
# 添加图例
ax.legend()

# 保存图片到本地文件
plt.savefig('gradient_magnitude.png', dpi=300, bbox_inches='tight')

# 显示图片
# plt.show()